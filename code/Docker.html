<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://hecan1020.github.io/code/Docker.html"><meta property="og:site_name" content="白米粥"><meta property="og:title" content="Docker学习笔记"><meta property="og:description" content="相关网站 Docker中文官方网站 (http://docker.p2hp.com/) Docker仓库 (https://hub.docker.com/) 尚硅谷Docker教学 (https://www.bilibili.com/video/BV1gr4y1U7CY/) CentOS安装DockerEngine (https://docs.dock..."><meta property="og:type" content="article"><meta property="og:image" content="https://hecan1020.github.io/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-04-12T13:51:31.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Docker学习笔记"><meta property="article:author" content="白米粥"><meta property="article:modified_time" content="2023-04-12T13:51:31.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Docker学习笔记","image":["https://hecan1020.github.io/"],"dateModified":"2023-04-12T13:51:31.000Z","author":[{"@type":"Person","name":"白米粥"}]}</script><title>Docker学习笔记 | 白米粥</title><meta name="description" content="相关网站 Docker中文官方网站 (http://docker.p2hp.com/) Docker仓库 (https://hub.docker.com/) 尚硅谷Docker教学 (https://www.bilibili.com/video/BV1gr4y1U7CY/) CentOS安装DockerEngine (https://docs.dock...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-e269f769.css" as="style"><link rel="stylesheet" href="/assets/style-e269f769.css">
    <link rel="modulepreload" href="/assets/app-8bdbcd56.js"><link rel="modulepreload" href="/assets/framework-a4c02b8f.js"><link rel="modulepreload" href="/assets/Docker.html-df325cf5.js"><link rel="modulepreload" href="/assets/Docker.html-604563df.js"><link rel="prefetch" href="/assets/index.html-91e3b1cd.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-6052cc34.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-0ef6683d.js" as="script"><link rel="prefetch" href="/assets/Shiro.html-c2c7d6d8.js" as="script"><link rel="prefetch" href="/assets/interview.html-55055590.js" as="script"><link rel="prefetch" href="/assets/interview_Q_A.html-01faf588.js" as="script"><link rel="prefetch" href="/assets/404.html-aae006ea.js" as="script"><link rel="prefetch" href="/assets/index.html-64b62ac0.js" as="script"><link rel="prefetch" href="/assets/index.html-f956062a.js" as="script"><link rel="prefetch" href="/assets/index.html-1bc2c36b.js" as="script"><link rel="prefetch" href="/assets/index.html-0f3ceb1e.js" as="script"><link rel="prefetch" href="/assets/index.html-87c6de97.js" as="script"><link rel="prefetch" href="/assets/index.html-abd265e0.js" as="script"><link rel="prefetch" href="/assets/index.html-285c5c05.js" as="script"><link rel="prefetch" href="/assets/index.html-4a72959f.js" as="script"><link rel="prefetch" href="/assets/index.html-694403e8.js" as="script"><link rel="prefetch" href="/assets/index.html-bcf0191c.js" as="script"><link rel="prefetch" href="/assets/index.html-155aa863.js" as="script"><link rel="prefetch" href="/assets/index.html-8522d90e.js" as="script"><link rel="prefetch" href="/assets/index.html-3ea68222.js" as="script"><link rel="prefetch" href="/assets/index.html-545f055e.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-16780ebf.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-88f9ca3b.js" as="script"><link rel="prefetch" href="/assets/Shiro.html-87e88c4c.js" as="script"><link rel="prefetch" href="/assets/interview.html-a49038a5.js" as="script"><link rel="prefetch" href="/assets/interview_Q_A.html-57470f02.js" as="script"><link rel="prefetch" href="/assets/404.html-be487d22.js" as="script"><link rel="prefetch" href="/assets/index.html-82473335.js" as="script"><link rel="prefetch" href="/assets/index.html-738fa7ec.js" as="script"><link rel="prefetch" href="/assets/index.html-3e429ac3.js" as="script"><link rel="prefetch" href="/assets/index.html-8a5d7176.js" as="script"><link rel="prefetch" href="/assets/index.html-b1228c12.js" as="script"><link rel="prefetch" href="/assets/index.html-25bdd0f4.js" as="script"><link rel="prefetch" href="/assets/index.html-d18abf5a.js" as="script"><link rel="prefetch" href="/assets/index.html-e821ca32.js" as="script"><link rel="prefetch" href="/assets/index.html-6d5adef1.js" as="script"><link rel="prefetch" href="/assets/index.html-e53e1162.js" as="script"><link rel="prefetch" href="/assets/index.html-1e528248.js" as="script"><link rel="prefetch" href="/assets/index.html-25dddc9e.js" as="script"><link rel="prefetch" href="/assets/index.html-05297341.js" as="script"><link rel="prefetch" href="/assets/giscus-16d370b8.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-55d3196b.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-b90f2e0c.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-6e6cbe40.js" as="script"><link rel="prefetch" href="/assets/SearchResult-68156931.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><span class="site-name">白米粥</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="主页"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/article/" class="nav-link" aria-label="文章"><!---->文章<!----></a></div><div class="nav-item hide-in-mobile"><a href="/note/" class="nav-link" aria-label="随笔"><span class="font-icon icon iconfont icon-note" style=""></span>随笔<!----></a></div><div class="nav-item hide-in-mobile"><a href="/code/" class="nav-link active" aria-label="学习"><span class="font-icon icon iconfont icon-study" style=""></span>学习<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/hecan1020" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">搜索</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="font-icon icon iconfont icon-study" style=""></span><span class="title">学习</span><!----></p><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/code/Docker.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Docker学习笔记"><!---->Docker学习笔记<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#相关网站" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="相关网站"><!---->相关网站<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="简介"><!---->简介<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#基本组成" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="基本组成"><!---->基本组成<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#安装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装"><!---->安装<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#卸载旧版本" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="卸载旧版本"><!---->卸载旧版本<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#安装-yum-util并设置仓库地址" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 yum-util并设置仓库地址"><!---->安装 yum-util并设置仓库地址<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#安装docker-engine" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装Docker Engine"><!---->安装Docker Engine<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#启动docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="启动Docker"><!---->启动Docker<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#验证docker安装成功" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="验证Docker安装成功"><!---->验证Docker安装成功<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#卸载" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="卸载"><!---->卸载<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#卸载docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="卸载Docker"><!---->卸载Docker<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#删除资源" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="删除资源"><!---->删除资源<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#镜像加速器配置-阿里云" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="镜像加速器配置(阿里云)"><!---->镜像加速器配置(阿里云)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#常用命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="常用命令"><!---->常用命令<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#帮助启动类命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="帮助启动类命令"><!---->帮助启动类命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#镜像命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="镜像命令"><!---->镜像命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#容器命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="容器命令"><!---->容器命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#重要指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="重要指令"><!---->重要指令<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#构建自己的镜像" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="构建自己的镜像"><!---->构建自己的镜像<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#启动ubuntu容器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="启动ubuntu容器"><!---->启动ubuntu容器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#添加vim" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="添加vim"><!---->添加vim<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#创建含有vim功能的ubuntu的镜像" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建含有vim功能的ubuntu的镜像"><!---->创建含有vim功能的ubuntu的镜像<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#本地镜像发布到阿里云" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="本地镜像发布到阿里云"><!---->本地镜像发布到阿里云<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#创建命名空间" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建命名空间"><!---->创建命名空间<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#创建仓库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建仓库"><!---->创建仓库<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#私有库安装-本地镜像推送到私有库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="私有库安装&amp;本地镜像推送到私有库"><!---->私有库安装&amp;本地镜像推送到私有库<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#下载docker-registry镜像" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="下载Docker Registry镜像"><!---->下载Docker Registry镜像<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#运行镜像" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="运行镜像"><!---->运行镜像<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#设置私有库支持http" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="设置私有库支持http"><!---->设置私有库支持http<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#查看私有库的镜像列表" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="查看私有库的镜像列表"><!---->查看私有库的镜像列表<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#推送本地镜像到私有库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="推送本地镜像到私有库"><!---->推送本地镜像到私有库<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#容器数据卷" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="容器数据卷"><!---->容器数据卷<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#注意点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="注意点"><!---->注意点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="作用"><!---->作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="特点"><!---->特点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#挂载命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="挂载命令"><!---->挂载命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#容器卷的继承" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="容器卷的继承"><!---->容器卷的继承<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#安装常用软件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装常用软件"><!---->安装常用软件<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#tomcat" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Tomcat"><!---->Tomcat<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#nginx" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx"><!---->nginx<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#mysql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Mysql"><!---->Mysql<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#redis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="redis"><!---->redis<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#dockerfile" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Dockerfile"><!---->Dockerfile<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#简介-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="简介"><!---->简介<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#构建步骤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="构建步骤"><!---->构建步骤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#构建过程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="构建过程"><!---->构建过程<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#常用保留字" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="常用保留字"><!---->常用保留字<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#虚悬镜像" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="虚悬镜像"><!---->虚悬镜像<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#查询虚悬镜像" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="查询虚悬镜像"><!---->查询虚悬镜像<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#删除虚悬镜像" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="删除虚悬镜像"><!---->删除虚悬镜像<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#docker网络" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Docker网络"><!---->Docker网络<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#相关命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="相关命令"><!---->相关命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#作用-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="作用"><!---->作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#网络模式的介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="网络模式的介绍"><!---->网络模式的介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#自定义网络" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自定义网络"><!---->自定义网络<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#docker-compose-容器编排" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Docker-compose 容器编排"><!---->Docker-compose 容器编排<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#安装-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装"><!---->安装<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#compose核心概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="compose核心概念"><!---->compose核心概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#使用步骤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用步骤"><!---->使用步骤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#常用命令-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="常用命令"><!---->常用命令<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#portainer可视化工具" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Portainer可视化工具"><!---->Portainer可视化工具<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="介绍"><!---->介绍<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#docker容器监控cig-cadvisor-influxdb-granfana" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Docker容器监控CIG(CAdvisor+InfluxDB+Granfana)"><!---->Docker容器监控CIG(CAdvisor+InfluxDB+Granfana)<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#cadvisor" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CAdvisor"><!---->CAdvisor<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#influxdb" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="InfluxDB"><!---->InfluxDB<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#granfana" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Granfana"><!---->Granfana<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/code/Docker.html#使用docker-compose安装cig" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用docker-compose安装CIG"><!---->使用docker-compose安装CIG<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/code/Nginx.html" class="nav-link sidebar-link sidebar-page" aria-label="Nginx学习笔记"><!---->Nginx学习笔记<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/code/RabbitMQ.html" class="nav-link sidebar-link sidebar-page" aria-label="RabbitMQ学习笔记"><!---->RabbitMQ学习笔记<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/code/Shiro.html" class="nav-link sidebar-link sidebar-page" aria-label="Shiro学习笔记"><!---->Shiro学习笔记<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Docker学习笔记</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">白米粥</span></span><span property="author" content="白米粥"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-04-11T11:30:43.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 12 分钟</span><meta property="timeRequired" content="PT12M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category4 clickable" role="navigation">Java</span><span class="page-category-item category4 clickable" role="navigation">Docker</span><meta property="articleSection" content="Java,Docker"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#相关网站" class="router-link-active router-link-exact-active toc-link level2">相关网站</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#简介" class="router-link-active router-link-exact-active toc-link level2">简介</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#基本组成" class="router-link-active router-link-exact-active toc-link level3">基本组成</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#安装" class="router-link-active router-link-exact-active toc-link level2">安装</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#卸载旧版本" class="router-link-active router-link-exact-active toc-link level3">卸载旧版本</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#安装-yum-util并设置仓库地址" class="router-link-active router-link-exact-active toc-link level3">安装 yum-util并设置仓库地址</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#安装docker-engine" class="router-link-active router-link-exact-active toc-link level3">安装Docker Engine</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#启动docker" class="router-link-active router-link-exact-active toc-link level3">启动Docker</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#验证docker安装成功" class="router-link-active router-link-exact-active toc-link level3">验证Docker安装成功</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#卸载" class="router-link-active router-link-exact-active toc-link level2">卸载</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#卸载docker" class="router-link-active router-link-exact-active toc-link level3">卸载Docker</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#删除资源" class="router-link-active router-link-exact-active toc-link level3">删除资源</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#镜像加速器配置-阿里云" class="router-link-active router-link-exact-active toc-link level2">镜像加速器配置(阿里云)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#常用命令" class="router-link-active router-link-exact-active toc-link level2">常用命令</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#帮助启动类命令" class="router-link-active router-link-exact-active toc-link level3">帮助启动类命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#镜像命令" class="router-link-active router-link-exact-active toc-link level3">镜像命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#容器命令" class="router-link-active router-link-exact-active toc-link level3">容器命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#重要指令" class="router-link-active router-link-exact-active toc-link level3">重要指令</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#构建自己的镜像" class="router-link-active router-link-exact-active toc-link level2">构建自己的镜像</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#启动ubuntu容器" class="router-link-active router-link-exact-active toc-link level3">启动ubuntu容器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#添加vim" class="router-link-active router-link-exact-active toc-link level3">添加vim</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#创建含有vim功能的ubuntu的镜像" class="router-link-active router-link-exact-active toc-link level3">创建含有vim功能的ubuntu的镜像</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#本地镜像发布到阿里云" class="router-link-active router-link-exact-active toc-link level2">本地镜像发布到阿里云</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#创建命名空间" class="router-link-active router-link-exact-active toc-link level3">创建命名空间</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#创建仓库" class="router-link-active router-link-exact-active toc-link level3">创建仓库</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#私有库安装-本地镜像推送到私有库" class="router-link-active router-link-exact-active toc-link level2">私有库安装&amp;本地镜像推送到私有库</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#下载docker-registry镜像" class="router-link-active router-link-exact-active toc-link level3">下载Docker Registry镜像</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#运行镜像" class="router-link-active router-link-exact-active toc-link level3">运行镜像</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#设置私有库支持http" class="router-link-active router-link-exact-active toc-link level3">设置私有库支持http</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#查看私有库的镜像列表" class="router-link-active router-link-exact-active toc-link level3">查看私有库的镜像列表</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#推送本地镜像到私有库" class="router-link-active router-link-exact-active toc-link level3">推送本地镜像到私有库</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#容器数据卷" class="router-link-active router-link-exact-active toc-link level2">容器数据卷</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#注意点" class="router-link-active router-link-exact-active toc-link level3">注意点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#作用" class="router-link-active router-link-exact-active toc-link level3">作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#特点" class="router-link-active router-link-exact-active toc-link level3">特点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#挂载命令" class="router-link-active router-link-exact-active toc-link level3">挂载命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#容器卷的继承" class="router-link-active router-link-exact-active toc-link level3">容器卷的继承</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#安装常用软件" class="router-link-active router-link-exact-active toc-link level2">安装常用软件</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#tomcat" class="router-link-active router-link-exact-active toc-link level3">Tomcat</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#nginx" class="router-link-active router-link-exact-active toc-link level3">nginx</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#mysql" class="router-link-active router-link-exact-active toc-link level3">Mysql</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#redis" class="router-link-active router-link-exact-active toc-link level3">redis</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#dockerfile" class="router-link-active router-link-exact-active toc-link level2">Dockerfile</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#简介-1" class="router-link-active router-link-exact-active toc-link level3">简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#构建步骤" class="router-link-active router-link-exact-active toc-link level3">构建步骤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#构建过程" class="router-link-active router-link-exact-active toc-link level3">构建过程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#常用保留字" class="router-link-active router-link-exact-active toc-link level3">常用保留字</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#虚悬镜像" class="router-link-active router-link-exact-active toc-link level2">虚悬镜像</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#查询虚悬镜像" class="router-link-active router-link-exact-active toc-link level3">查询虚悬镜像</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#删除虚悬镜像" class="router-link-active router-link-exact-active toc-link level3">删除虚悬镜像</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#docker网络" class="router-link-active router-link-exact-active toc-link level2">Docker网络</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#相关命令" class="router-link-active router-link-exact-active toc-link level3">相关命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#作用-1" class="router-link-active router-link-exact-active toc-link level3">作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#网络模式的介绍" class="router-link-active router-link-exact-active toc-link level3">网络模式的介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#自定义网络" class="router-link-active router-link-exact-active toc-link level3">自定义网络</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#docker-compose-容器编排" class="router-link-active router-link-exact-active toc-link level2">Docker-compose 容器编排</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#安装-1" class="router-link-active router-link-exact-active toc-link level3">安装</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#compose核心概念" class="router-link-active router-link-exact-active toc-link level3">compose核心概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#使用步骤" class="router-link-active router-link-exact-active toc-link level3">使用步骤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#常用命令-1" class="router-link-active router-link-exact-active toc-link level3">常用命令</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#portainer可视化工具" class="router-link-active router-link-exact-active toc-link level2">Portainer可视化工具</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#介绍" class="router-link-active router-link-exact-active toc-link level3">介绍</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#docker容器监控cig-cadvisor-influxdb-granfana" class="router-link-active router-link-exact-active toc-link level2">Docker容器监控CIG(CAdvisor+InfluxDB+Granfana)</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#cadvisor" class="router-link-active router-link-exact-active toc-link level3">CAdvisor</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#influxdb" class="router-link-active router-link-exact-active toc-link level3">InfluxDB</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#granfana" class="router-link-active router-link-exact-active toc-link level3">Granfana</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/code/Docker.html#使用docker-compose安装cig" class="router-link-active router-link-exact-active toc-link level3">使用docker-compose安装CIG</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><!-- more --><h1 id="docker学习笔记" tabindex="-1"><a class="header-anchor" href="#docker学习笔记" aria-hidden="true">#</a> Docker学习笔记</h1><h2 id="相关网站" tabindex="-1"><a class="header-anchor" href="#相关网站" aria-hidden="true">#</a> 相关网站</h2><p><a href="http://docker.p2hp.com/" target="_blank" rel="noopener noreferrer">Docker中文官方网站<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker仓库<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.bilibili.com/video/BV1gr4y1U7CY/" target="_blank" rel="noopener noreferrer">尚硅谷Docker教学<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">CentOS安装DockerEngine<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank" rel="noopener noreferrer">阿里云镜像加速器<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instance/dashboard" target="_blank" rel="noopener noreferrer">阿里云镜像仓库地址<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer">Dockerfile构建资料<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker-compose官方资料<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.portainer.io/" target="_blank" rel="noopener noreferrer">Portainer官网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://docs.portainer.io/start/install-ce/server/docker/linux" target="_blank" rel="noopener noreferrer">Portainer安装文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介" aria-hidden="true">#</a> 简介</h2><p>Docker是基于Go语言实现的云开源项目，能实现只需要一次配置环境，换到别的机子上就可以一键部署好，大大的简化了操作。也就是<strong>一次镜像，处处运行</strong>。</p><p>解决了运行环境和配置问题的软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术。</p><h3 id="基本组成" tabindex="-1"><a class="header-anchor" href="#基本组成" aria-hidden="true">#</a> 基本组成</h3><ol><li>镜像：类似于java中的类；是一个只读模版，用来常见Docker容器，一个镜像可以创建多个容器。</li><li>容器：类似于java中的对象；容器是用镜像创建的运行实例，每个容器都是相互隔离的、保证安全的。</li><li>仓库：类似于java中的maven仓库；存储docker镜像的地方，仓库分为共有和私有。</li></ol><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><h3 id="卸载旧版本" tabindex="-1"><a class="header-anchor" href="#卸载旧版本" aria-hidden="true">#</a> 卸载旧版本</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装-yum-util并设置仓库地址" tabindex="-1"><a class="header-anchor" href="#安装-yum-util并设置仓库地址" aria-hidden="true">#</a> 安装 yum-util并设置仓库地址</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo yum install -y yum-utils
sudo yum-config-manager \
    --add-repo \
    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
# 更新yum软件包索引
yum makecache fast(centos8 没有fast参数，去掉即可)
yum makecache
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装docker-engine" tabindex="-1"><a class="header-anchor" href="#安装docker-engine" aria-hidden="true">#</a> 安装Docker Engine</h3><p>安装最新版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装指定版本</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum list docker-ce --showduplicates | sort -r
 
sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动docker" tabindex="-1"><a class="header-anchor" href="#启动docker" aria-hidden="true">#</a> 启动Docker</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo systemctl start docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="验证docker安装成功" tabindex="-1"><a class="header-anchor" href="#验证docker安装成功" aria-hidden="true">#</a> 验证Docker安装成功</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo docker version
sudo docker run hello-world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="卸载" tabindex="-1"><a class="header-anchor" href="#卸载" aria-hidden="true">#</a> 卸载</h2><h3 id="卸载docker" tabindex="-1"><a class="header-anchor" href="#卸载docker" aria-hidden="true">#</a> 卸载Docker</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo systemctl stop docker
yum remove docker-ce docker-ce-cli containerd.io
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除资源" tabindex="-1"><a class="header-anchor" href="#删除资源" aria-hidden="true">#</a> 删除资源</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rm -rf /var/lib/docker
rm -rf /var/lib/containerd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="镜像加速器配置-阿里云" tabindex="-1"><a class="header-anchor" href="#镜像加速器配置-阿里云" aria-hidden="true">#</a> 镜像加速器配置(阿里云)</h2><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank" rel="noopener noreferrer">阿里云镜像加速配置<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><img src="/assets/image-20230410110901256-f9d70709.png" alt="阿里云镜像加速" style="zoom:50%;"><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令" aria-hidden="true">#</a> 常用命令</h2><h3 id="帮助启动类命令" tabindex="-1"><a class="header-anchor" href="#帮助启动类命令" aria-hidden="true">#</a> 帮助启动类命令</h3><table><thead><tr><th style="text-align:center;">功能</th><th style="text-align:center;">命令</th></tr></thead><tbody><tr><td style="text-align:center;">启动Docker</td><td style="text-align:center;">systemctl start docker</td></tr><tr><td style="text-align:center;">停止Docker</td><td style="text-align:center;">systemctl stop docker</td></tr><tr><td style="text-align:center;">重启Docker</td><td style="text-align:center;">systemctl restart docker</td></tr><tr><td style="text-align:center;">查看Docker状态</td><td style="text-align:center;">systemctl status docker</td></tr><tr><td style="text-align:center;">开机启动</td><td style="text-align:center;">systemctl enable docker</td></tr><tr><td style="text-align:center;">查看Docker概要信息</td><td style="text-align:center;">docker info</td></tr><tr><td style="text-align:center;">查看Docker总体帮助文档</td><td style="text-align:center;">docker --help</td></tr><tr><td style="text-align:center;">查看Docker命令帮助文档</td><td style="text-align:center;">docker 具体命令 --help</td></tr></tbody></table><h3 id="镜像命令" tabindex="-1"><a class="header-anchor" href="#镜像命令" aria-hidden="true">#</a> 镜像命令</h3><table><thead><tr><th style="text-align:center;">功能</th><th style="text-align:center;">命令</th></tr></thead><tbody><tr><td style="text-align:center;">查看本地主机上的镜像</td><td style="text-align:center;">docker images -a*(列出本地所有镜像，包含历史镜像)* -q*(只显示镜像ID)*</td></tr><tr><td style="text-align:center;">搜索镜像</td><td style="text-align:center;">docker search [镜像名称] --limit [数量] <em>(展示条数)</em></td></tr><tr><td style="text-align:center;">拉取镜像</td><td style="text-align:center;">docker pull [镜像名字[:TAG]] <em>(不加tag就是拉取最新的)</em></td></tr><tr><td style="text-align:center;">查看镜像/容器/数据卷所占的空间</td><td style="text-align:center;">docker system df</td></tr><tr><td style="text-align:center;">删除某个或多个镜像</td><td style="text-align:center;">docker rmi [-f <em>(强制删除)</em> ] [镜像ID/镜像名称:TAG] [镜像ID/镜像名称:TAG] ...</td></tr><tr><td style="text-align:center;">删除所有镜像</td><td style="text-align:center;">docker rmi -f $(docker images -qa)</td></tr></tbody></table><h3 id="容器命令" tabindex="-1"><a class="header-anchor" href="#容器命令" aria-hidden="true">#</a> 容器命令</h3><table><thead><tr><th style="text-align:center;">功能</th><th style="text-align:center;">命令</th></tr></thead><tbody><tr><td style="text-align:center;">新建+启动容器</td><td style="text-align:center;">docker run [OPTIONS] 镜像名称 [COMMAND] [ARG...]<img src="/assets/image-20230410113714968-0f0beb5f.png" alt="image-20230410113714968" loading="lazy"></td></tr><tr><td style="text-align:center;">列出当前所有正在运行的容器</td><td style="text-align:center;">docker ps [OPTIONS]<img src="/assets/image-20230410114815274-2eea6aa5.png" alt="image-20230410114815274" style="zoom:50%;"></td></tr><tr><td style="text-align:center;">退出容器</td><td style="text-align:center;"><img src="/assets/image-20230410114957865-1da7f1fd.png" alt="image-20230410114957865" style="zoom:50%;"></td></tr><tr><td style="text-align:center;">启动已停止运行的容器</td><td style="text-align:center;">docker start 容器ID或者容器名字</td></tr><tr><td style="text-align:center;">重启容器</td><td style="text-align:center;">docker restart 容器ID或者容器名字</td></tr><tr><td style="text-align:center;">停止容器</td><td style="text-align:center;">docker stop 容器ID或者容器名字</td></tr><tr><td style="text-align:center;">强制停止容器</td><td style="text-align:center;">docker kill 容器ID或者容器名字</td></tr><tr><td style="text-align:center;">删除已停止容器</td><td style="text-align:center;">docker rm [-f] 容器ID或者容器名字</td></tr></tbody></table><h3 id="重要指令" tabindex="-1"><a class="header-anchor" href="#重要指令" aria-hidden="true">#</a> 重要指令</h3><table><thead><tr><th style="text-align:center;">功能</th><th style="text-align:center;">命令</th></tr></thead><tbody><tr><td style="text-align:center;">查看容器日志</td><td style="text-align:center;">docker log [-f(实时查看)] 容器ID/容器名称</td></tr><tr><td style="text-align:center;">查看容器内运行的进程</td><td style="text-align:center;">docker top 容器ID/容器名称</td></tr><tr><td style="text-align:center;">查看容器内部细节</td><td style="text-align:center;">docker inspect 容器ID/容器名称</td></tr><tr><td style="text-align:center;">进入正在运行的容器并以命令行交互</td><td style="text-align:center;">docker exec -it 容器ID /bin/bash</td></tr><tr><td style="text-align:center;">从容器内拷贝文件到主机上</td><td style="text-align:center;">docker cp 容器ID:容器路径 本机路径</td></tr><tr><td style="text-align:center;">导入和导出容器</td><td style="text-align:center;">cat 文件名.tar | docker import -镜像用户/镜像名:镜像版本号/docker export 容器ID &gt; 文件名.tar<img src="/assets/image-20230410120945285-a9392186.png" alt="导入和导出容器" loading="lazy"></td></tr></tbody></table><h2 id="构建自己的镜像" tabindex="-1"><a class="header-anchor" href="#构建自己的镜像" aria-hidden="true">#</a> 构建自己的镜像</h2><h3 id="启动ubuntu容器" tabindex="-1"><a class="header-anchor" href="#启动ubuntu容器" aria-hidden="true">#</a> 启动ubuntu容器</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker run -it ubuntu /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="添加vim" tabindex="-1"><a class="header-anchor" href="#添加vim" aria-hidden="true">#</a> 添加vim</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>apt update
apt install vim
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建含有vim功能的ubuntu的镜像" tabindex="-1"><a class="header-anchor" href="#创建含有vim功能的ubuntu的镜像" aria-hidden="true">#</a> 创建含有vim功能的ubuntu的镜像</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker commit -m=&quot;带有vim功能的ubuntu&quot; -a=&quot;xxx&quot; 容器ID 镜像名称[:版本号]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="本地镜像发布到阿里云" tabindex="-1"><a class="header-anchor" href="#本地镜像发布到阿里云" aria-hidden="true">#</a> 本地镜像发布到阿里云</h2><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instance/dashboard" target="_blank" rel="noopener noreferrer">阿里云镜像仓库地址<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="创建命名空间" tabindex="-1"><a class="header-anchor" href="#创建命名空间" aria-hidden="true">#</a> 创建命名空间</h3><figure><img src="/assets/image-20230410123313283-86aa1bff.png" alt="image-20230410123313283" tabindex="0" loading="lazy"><figcaption>image-20230410123313283</figcaption></figure><h3 id="创建仓库" tabindex="-1"><a class="header-anchor" href="#创建仓库" aria-hidden="true">#</a> 创建仓库</h3><img src="/assets/image-20230410123351163-3b223df2.png" alt="image-20230410123351163" style="zoom:50%;"><figure><img src="/assets/image-20230410123412038-d5cf66e5.png" alt="image-20230410123412038" tabindex="0" loading="lazy"><figcaption>image-20230410123412038</figcaption></figure><p>之后按照阿里云提示的命令进行操作</p><h2 id="私有库安装-本地镜像推送到私有库" tabindex="-1"><a class="header-anchor" href="#私有库安装-本地镜像推送到私有库" aria-hidden="true">#</a> 私有库安装&amp;本地镜像推送到私有库</h2><h3 id="下载docker-registry镜像" tabindex="-1"><a class="header-anchor" href="#下载docker-registry镜像" aria-hidden="true">#</a> 下载Docker Registry镜像</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker pull registry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="运行镜像" tabindex="-1"><a class="header-anchor" href="#运行镜像" aria-hidden="true">#</a> 运行镜像</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker run -d -p 5000:5000 -v /root/myregistry:/tmp/registry --privileged=true registry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="设置私有库支持http" tabindex="-1"><a class="header-anchor" href="#设置私有库支持http" aria-hidden="true">#</a> 设置私有库支持http</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cat /etc/docker/daemon.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>新增如下配置:</p><img src="/assets/image-20230410125445167-2f1d2f79.png" alt="image-20230410125445167" style="zoom:50%;"><h3 id="查看私有库的镜像列表" tabindex="-1"><a class="header-anchor" href="#查看私有库的镜像列表" aria-hidden="true">#</a> 查看私有库的镜像列表</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -XGET http://localhost:5000/v2/_catalog
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="推送本地镜像到私有库" tabindex="-1"><a class="header-anchor" href="#推送本地镜像到私有库" aria-hidden="true">#</a> 推送本地镜像到私有库</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> tag localhost/vim-ubuntu localhost:5000/vim-ubuntu
<span class="token function">docker</span> push localhost:5000/vim-ubuntu:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="容器数据卷" tabindex="-1"><a class="header-anchor" href="#容器数据卷" aria-hidden="true">#</a> 容器数据卷</h2><h3 id="注意点" tabindex="-1"><a class="header-anchor" href="#注意点" aria-hidden="true">#</a> 注意点</h3><ul><li>在命令后面建议加上–privileged=true，解决CentOS系统中cannot open directory.：Permission denied 问题</li></ul><h3 id="作用" tabindex="-1"><a class="header-anchor" href="#作用" aria-hidden="true">#</a> 作用</h3><p>主要是将容器内的数据保存在宿主机中，即使容器停止或者删除，容器卷映射的目录也还是存在</p><h3 id="特点" tabindex="-1"><a class="header-anchor" href="#特点" aria-hidden="true">#</a> 特点</h3><ul><li>数据卷可在容器之间共享或重用数据</li><li>卷中的更改可以直接实时生效</li><li>数据卷中的更改不会包含在镜像的更新中</li><li>数据卷的声明周期一直持续到没有容器使用它位置</li></ul><h3 id="挂载命令" tabindex="-1"><a class="header-anchor" href="#挂载命令" aria-hidden="true">#</a> 挂载命令</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token parameter variable">-v</span> 宿主机目录:容器目录:ro<span class="token punctuation">(</span>默认是rw，有读写权限<span class="token punctuation">)</span> 容器ID/容器名
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="容器卷的继承" tabindex="-1"><a class="header-anchor" href="#容器卷的继承" aria-hidden="true">#</a> 容器卷的继承</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true --volumes-from 父容器ID 容器ID/容器名
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="安装常用软件" tabindex="-1"><a class="header-anchor" href="#安装常用软件" aria-hidden="true">#</a> 安装常用软件</h2><h3 id="tomcat" tabindex="-1"><a class="header-anchor" href="#tomcat" aria-hidden="true">#</a> Tomcat</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> search tomcat
<span class="token function">docker</span> pull tomcat
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token parameter variable">--name</span><span class="token operator">=</span>tomcat tomcat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> nginx</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker run --name nginx \
  -v /root/custom_data/nginx/nginx.conf:/etc/nginx/nginx.conf:ro \
  --privileged=true \
  -d \
  nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> Mysql</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token punctuation">\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-v</span> /root/custom_data/mysql/conf:/etc/mysql/conf.d <span class="token punctuation">\</span>
  <span class="token parameter variable">-v</span> /root/custom_data/mysql/data:/var/log/mysql <span class="token punctuation">\</span>
  <span class="token parameter variable">-v</span> /root/custom_data/mysql/log:/var/lib/mysql <span class="token punctuation">\</span>
  <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token punctuation">\</span>
  <span class="token parameter variable">--name</span> mysql  <span class="token punctuation">\</span>
  mysql <span class="token punctuation">\</span>
  --character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> redis</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker run \
    -v /root/custom_data/redis/conf:/usr/local/etc/redis \
    -v /root/custom_data/redis/data:/data \
    -d \
    --name redis \
    --privileged=true \
    redis \
    redis-server /usr/local/etc/redis/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="分布式存储解决方案" tabindex="-1"><a class="header-anchor" href="#分布式存储解决方案" aria-hidden="true">#</a> 分布式存储解决方案</h4><ol><li>Hash取余分区：缺点是如果一台redis挂了或者扩容缩容，那么hash(key) % redis机器台数 计算出来的值就会发生很大变化</li><li>一致性哈希算法分区：缺点是如果节点太少，容易因为节点分布不均匀而造成数据倾斜的问题(被缓存的对象大部分落在同一台主机上)</li><li>哈希槽分区</li></ol><h2 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile" aria-hidden="true">#</a> Dockerfile</h2><p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer">Dockerfile构建资料<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="简介-1" tabindex="-1"><a class="header-anchor" href="#简介-1" aria-hidden="true">#</a> 简介</h3><p>Dockerfile是用来构建镜像的一个文本文件，是由一条条构建镜像所需的指令和参数构成的脚本</p><h3 id="构建步骤" tabindex="-1"><a class="header-anchor" href="#构建步骤" aria-hidden="true">#</a> 构建步骤</h3><ol><li>编写Dockerfile文件</li><li>docker build 命令构建镜像</li><li>docker run 镜像运行容器实例</li></ol><h3 id="构建过程" tabindex="-1"><a class="header-anchor" href="#构建过程" aria-hidden="true">#</a> 构建过程</h3><h4 id="基础知识" tabindex="-1"><a class="header-anchor" href="#基础知识" aria-hidden="true">#</a> 基础知识</h4><ol><li>每条保留字指令都<strong>必须为大写字母</strong>且后面要跟随至少一个参数</li><li>指令按照从上到下，顺序执行</li><li>#表示注释</li><li>每条指令都会创建一个新的镜像层并对镜像进行提交</li></ol><h4 id="执行流程" tabindex="-1"><a class="header-anchor" href="#执行流程" aria-hidden="true">#</a> 执行流程</h4><ol><li>docker 从基础镜像运行一个容器</li><li>执行一条指令并对容器做出修改</li><li>执行类似docker commit的操作提交一个新的镜像层</li><li>docker 再基于刚提交的净吸纳过运行一个新容器</li><li>执行dockerfile中的下一条指令直到左右的指令都执行完成</li></ol><h3 id="常用保留字" tabindex="-1"><a class="header-anchor" href="#常用保留字" aria-hidden="true">#</a> 常用保留字</h3><ul><li><p>FROM</p><p>基础镜像，当前新镜像是基于哪个镜像的，指定一个已经存在的镜像作为模版，第一条必须是FROM</p></li><li><p>MAINTAINER</p><p>镜像维护者的姓名和邮箱地址</p></li><li><p>RUN</p><p>容器构建时需要运行的命令，是在docker build 时运行 ，分为两种:</p><p>​ shell 格式 ： 类似于在终端bash中运行的命令，例如： RUN yum -y install vim</p><p>​ exec 格式 ： RUN [&quot;可执行文件&quot;,&quot;参数1&quot;, “参数2”] ， 例如: RUN [&quot;./test.php&quot;, “dev”, “offline”] 等价于 RUN ./test.php dev offline</p></li><li><p>EXPOSE</p><p>当前容器对外暴露的端口</p></li><li><p>WORKDIR</p><p>指定在创建容器后，终端默认登录的进来工作目录，一个落脚点</p></li><li><p>USER</p><p>指定该镜像以什么样的用户去执行，如果不指定，默认为root</p></li><li><p>ENV</p><p>用来在构建过程中设置环境变量，这个环境变量可以在后续的任何RUN指令中使用，引用方式 $XXX</p></li><li><p>ADD</p><p>将宿主机目录下的文件拷贝进镜像且会自动处理URL和解压tar压缩包</p></li><li><p>COPY</p><p>类似ADD，但是没有自动解压功能，将宿主机中的数据拷贝到镜像中，COPY src dest / COPY [&quot;src&quot;, “dest”]</p></li><li><p>VOLUME</p><p>容器数据卷，用于数据保存和持久化工作</p></li><li><p>CMD</p><p>指定容器启动后要执行的命令，是在docker run 时运行， 和RUN 语法一样，如果一个文件有多个CMD 命令，那么只执行最后一个，并且会被docker run 命令 [参数] 最后的参数给替换</p></li><li><p>ENTRYPOINT</p><p>用来指定一个容器启动时要运行的命令，类似于CMD命令，但是ENTRYPOINT不会被docker run 后面的命令覆盖，而且这些命令行参数会被当做参数送给ENTRYPOINT指令指定的程序。</p></li></ul><h2 id="虚悬镜像" tabindex="-1"><a class="header-anchor" href="#虚悬镜像" aria-hidden="true">#</a> 虚悬镜像</h2><p>仓库名和tag名都为&lt;none&gt; 的镜像</p><h3 id="查询虚悬镜像" tabindex="-1"><a class="header-anchor" href="#查询虚悬镜像" aria-hidden="true">#</a> 查询虚悬镜像</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker image ls -f dangling=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="删除虚悬镜像" tabindex="-1"><a class="header-anchor" href="#删除虚悬镜像" aria-hidden="true">#</a> 删除虚悬镜像</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker image prune
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="docker网络" tabindex="-1"><a class="header-anchor" href="#docker网络" aria-hidden="true">#</a> Docker网络</h2><p>docker 启动后会有一个docker0 的网络</p><figure><img src="/assets/image-20230410170907222-62cfaa92.png" alt="image-20230410170907222" tabindex="0" loading="lazy"><figcaption>image-20230410170907222</figcaption></figure><p>当安装docker 后，会默认安装3个网络模式</p><figure><img src="/assets/image-20230410171001678-b8bd91c8.png" alt="image-20230410171001678" tabindex="0" loading="lazy"><figcaption>image-20230410171001678</figcaption></figure><h3 id="相关命令" tabindex="-1"><a class="header-anchor" href="#相关命令" aria-hidden="true">#</a> 相关命令</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker network [OPTIONS]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="/assets/image-20230410171109388-b39c9e21.png" alt="image-20230410171109388" style="zoom:50%;"><h3 id="作用-1" tabindex="-1"><a class="header-anchor" href="#作用-1" aria-hidden="true">#</a> 作用</h3><ol><li>容器间的互联和通信以及端口映射</li><li>容器IP变动时可以通过服务名直接网络通信而不受到IP变动的影响</li></ol><h3 id="网络模式的介绍" tabindex="-1"><a class="header-anchor" href="#网络模式的介绍" aria-hidden="true">#</a> 网络模式的介绍</h3><table><thead><tr><th>网络模式</th><th>简介</th></tr></thead><tbody><tr><td>bridge</td><td>为每一个容器分配、设置IP等，并将容器连接到一个<strong>docker0</strong>虚拟网桥，默认为该模式。<strong>使用--network bridge指定</strong></td></tr><tr><td>host</td><td>容器将不会虚拟出自己的网卡，配置自己的IP等，而是使用宿主机的IP和端口。<strong>使用 --network host 指定</strong></td></tr><tr><td>none</td><td>容器有独立的Netwok namespace，但并没有对其进行任何网络设置，如分配veth pair和网桥连接，IP等。<strong>使用--network none指定</strong></td></tr><tr><td>container</td><td>新创建的容器不会创建自己的网卡和配置自己的IP，而是和一个指定的容器共享IP、端口范围等。<strong>使用 --network container:NAME或者容器ID指定</strong></td></tr></tbody></table><h3 id="自定义网络" tabindex="-1"><a class="header-anchor" href="#自定义网络" aria-hidden="true">#</a> 自定义网络</h3><p>解决了只能用IP通信的问题，可以用服务名通信，如下步骤实现：</p><ol><li>创建自定义网络 docker network create customer_network</li><li>新建容器加入自定义网络; docker run --network customer_network 容器名</li></ol><h2 id="docker-compose-容器编排" tabindex="-1"><a class="header-anchor" href="#docker-compose-容器编排" aria-hidden="true">#</a> Docker-compose 容器编排</h2><p><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker-compose官方资料<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>是Docker 是官方的开源项目，实现对Docker容器集群的快速编排。编写一个docker-compose.yml文件，在其中定义各个容器的关系，就可以用一条指令来一键启动或者关闭这些容器。</p><h3 id="安装-1" tabindex="-1"><a class="header-anchor" href="#安装-1" aria-hidden="true">#</a> 安装</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-SL</span> https://github.com/docker/compose/releases/download/v2.17.2/docker-compose-linux-x86_64 <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/bin/docker-compose /usr/bin/docker-compose
<span class="token comment">#测试是否安装成功</span>
<span class="token function">docker</span> compose version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="compose核心概念" tabindex="-1"><a class="header-anchor" href="#compose核心概念" aria-hidden="true">#</a> compose核心概念</h3><ul><li><p>一文件: docker-compose.yml</p></li><li><p>两要素:</p></li></ul><p>​ 服务：一个个应用容器实例，比如订单微服务，mysql容器，redis等</p><p>​ 工程：由一组关联的应用容器组成的一个<strong>完整业务单元</strong>，在docker-compose.yml文件中定义</p><h3 id="使用步骤" tabindex="-1"><a class="header-anchor" href="#使用步骤" aria-hidden="true">#</a> 使用步骤</h3><ol><li>编写Dockerfile定义各个微服务应用并构建出对应的镜像文件</li><li>使用docker-compose.yml定义一个完整业务单元，安排好整体应用中的各个容器服务。</li><li>最后，执行docker-compose up命令来启动并运行整个应用程序，完成一键部署上线</li></ol><h3 id="常用命令-1" tabindex="-1"><a class="header-anchor" href="#常用命令-1" aria-hidden="true">#</a> 常用命令</h3><figure><img src="/assets/image-20230410181108116-d39aeeb7.png" alt="image-20230410181108116" tabindex="0" loading="lazy"><figcaption>image-20230410181108116</figcaption></figure><h2 id="portainer可视化工具" tabindex="-1"><a class="header-anchor" href="#portainer可视化工具" aria-hidden="true">#</a> Portainer可视化工具</h2><p><a href="https://www.portainer.io/" target="_blank" rel="noopener noreferrer">Portainer官网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://docs.portainer.io/start/install-ce/server/docker/linux" target="_blank" rel="noopener noreferrer">Portainer安装文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h3><p>Portainer是一个可视化docker操作工具，可以不用写docker命令实现容器的生命周期进行管理，方便的实现容器的创建、运行、停止、暂停、恢复、删除、复制等。</p><h4 id="安装-2" tabindex="-1"><a class="header-anchor" href="#安装-2" aria-hidden="true">#</a> 安装</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker run -d -p 8000:8000 -p 9443:9443 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="docker容器监控cig-cadvisor-influxdb-granfana" tabindex="-1"><a class="header-anchor" href="#docker容器监控cig-cadvisor-influxdb-granfana" aria-hidden="true">#</a> Docker容器监控CIG(CAdvisor+InfluxDB+Granfana)</h2><figure><img src="/assets/image-20230410183153579-d6f8ac3f.png" alt="image-20230410183153579" tabindex="0" loading="lazy"><figcaption>image-20230410183153579</figcaption></figure><h3 id="cadvisor" tabindex="-1"><a class="header-anchor" href="#cadvisor" aria-hidden="true">#</a> CAdvisor</h3><p>CAdvisor 是一个容器资源监控工具，包括容器的内存，CPU，网络IO，磁盘IO等监控，同时提供了一个web页面用于查看容器的实施运行状态。CAdvisor默认存储2分钟的数据，而且只是针对单物理机。不过CAdvisor提供了很多数据集成接口，支持InfluxDB,Redis,Kafka，ES等集成，可以加上对应配置将监控数据发往这些数据库存储起来</p><p>主要功能：</p><pre><code>- 展示Host和容器两个层次的监控数据
- 展示历史变化数据
</code></pre><h3 id="influxdb" tabindex="-1"><a class="header-anchor" href="#influxdb" aria-hidden="true">#</a> InfluxDB</h3><p>是用Go语言编写的一个开源分布式时序、事件和指标数据库，无需外部依赖。</p><p>主要功能：</p><pre><code>- 基于时间序列，支持与时间有关的相关函数(如最大、最小、求和等)
- 可度量性： 你可以实时对大量数据进行计算
- 基于事件： 它支持任意的时间数据
</code></pre><h3 id="granfana" tabindex="-1"><a class="header-anchor" href="#granfana" aria-hidden="true">#</a> Granfana</h3><p>是一个开源的数据监控分析可视化平台，支持多种数据源配置和丰富的插件及末班功能，支持图标权限控制和报警。</p><p>主要特性：</p><pre><code>- 灵活丰富的图形化选项
- 可以混合多种风格
- 支持白天和夜间模式
- 多个数据源
</code></pre><h3 id="使用docker-compose安装cig" tabindex="-1"><a class="header-anchor" href="#使用docker-compose安装cig" aria-hidden="true">#</a> 使用docker-compose安装CIG</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.1&#39;</span>
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">grafana_data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
 <span class="token key atrule">influxdb</span><span class="token punctuation">:</span>
   <span class="token key atrule">image</span><span class="token punctuation">:</span> tutum/influxdb<span class="token punctuation">:</span><span class="token number">0.9</span>
   <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
   <span class="token key atrule">environment</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> PRE_CREATE_DB=cadvisor
   <span class="token key atrule">ports</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> <span class="token string">&quot;8083:8083&quot;</span>
   <span class="token punctuation">-</span> <span class="token string">&quot;8086:8086&quot;</span>
   <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> ./data/influxdb<span class="token punctuation">:</span>/data
             
 <span class="token key atrule">cadvisor</span><span class="token punctuation">:</span>
   <span class="token key atrule">image</span><span class="token punctuation">:</span> google/cadvisor
   <span class="token key atrule">links</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> influxdb<span class="token punctuation">:</span>influxsrv
   <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>storage_driver=influxdb <span class="token punctuation">-</span>storage_driver_db=cadvisor <span class="token punctuation">-</span>storage_driver_host=influxsrv<span class="token punctuation">:</span><span class="token number">8086</span>
   <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
   <span class="token key atrule">ports</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> <span class="token string">&quot;8080:8080&quot;</span>
   <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> /<span class="token punctuation">:</span>/rootfs<span class="token punctuation">:</span>ro
   <span class="token punctuation">-</span> /var/run<span class="token punctuation">:</span>/var/run<span class="token punctuation">:</span>rw
   <span class="token punctuation">-</span> /sys<span class="token punctuation">:</span>/sys<span class="token punctuation">:</span>ro
   <span class="token punctuation">-</span> /var/lib/docker/<span class="token punctuation">:</span>/var/lib/docker<span class="token punctuation">:</span>ro
 <span class="token key atrule">grafana</span><span class="token punctuation">:</span>
   <span class="token key atrule">user</span><span class="token punctuation">:</span> <span class="token string">&quot;104&quot;</span>
   <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/grafana
   <span class="token key atrule">user</span><span class="token punctuation">:</span> <span class="token string">&quot;104&quot;</span>
   <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
   <span class="token key atrule">links</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> influxdb<span class="token punctuation">:</span>influxsrv
   <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;3000:3000&quot;</span>
   <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> grafana_data<span class="token punctuation">:</span>/var/lib/grafana
   <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> HTTP_USER=admin
    <span class="token punctuation">-</span> HTTP_PASS=admin
    <span class="token punctuation">-</span> INFLUXDB_HOST=influxsrv
    <span class="token punctuation">-</span> INFLUXDB_PORT=8086
    <span class="token punctuation">-</span> INFLUXDB_NAME=cadvisor
    <span class="token punctuation">-</span> INFLUXDB_USER=root
    <span class="token punctuation">-</span> INFLUXDB_PASS=root

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 1020205116@qq.com">白米粥</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><!----><a href="/code/Nginx.html" class="nav-link next" aria-label="Nginx学习笔记"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Nginx学习笔记<!----></div></a></nav><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Theme by <a href="https://theme-hope.vuejs.press">vuepress-theme-hope</a></div><!----></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-8bdbcd56.js" defer></script>
  </body>
</html>
